{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\chaur\\\\Desktop\\\\homechef-mern-new\\\\homechef\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\chaur\\\\Desktop\\\\homechef-mern-new\\\\homechef\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\chaur\\\\Desktop\\\\homechef-mern-new\\\\homechef\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\chaur\\\\Desktop\\\\homechef-mern-new\\\\homechef\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Bar}from'react-chartjs-2';import{CSVLink}from\"react-csv\";import axios from'axios';import{ToastContainer,toast}from'react-toastify';var AnalyticsCharts=/*#__PURE__*/function(_Component){_inherits(AnalyticsCharts,_Component);var _super=_createSuper(AnalyticsCharts);function AnalyticsCharts(props){var _this;_classCallCheck(this,AnalyticsCharts);_this=_super.call(this,props);_this.state={salesperdish:[{dish:'Pavbhaji',amount:20}],chartData:{labels:[],datasets:[{label:'sales',data:[],backgroundColor:['rgba(255,99,132,0.6)','rgba(54,152,235,0.6)','rgba(75,192,192,0.6)','rgba(255,159,100,0.6)','rgba(97,25,8,0.6)']}]}};return _this;}_createClass(AnalyticsCharts,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('http://165.22.208.232:5000/homechef/profile',{// axios.get('homechef/profile', {\nheaders:{'auth-token':localStorage.usertoken}}).then(function(res){console.log(res);if(res.data.status==true){axios.get('http://165.22.208.232:5000/homechef/analysis',{// axios.get('homechef/analysis', {\nheaders:{'auth-token':localStorage.usertoken}}).then(function(res){var array=res.data.data.sales;var data;var sales=[],dish=[],amounts=[];for(var index=0;index<array.length;index++){console.log(array[index][0].dish);console.log(array[index][0].dish);data={dish:array[index][0].dish,amount:array[index][0].amount};dish.push(array[index][0].dish);amounts.push(array[index][0].amount);sales.push(data);}console.log(dish);console.log(amounts);_this2.setState({chartData:{labels:dish,datasets:[{label:'sales',data:amounts,backgroundColor:['rgba(255,99,132,0.6)','rgba(54,152,235,0.6)','rgba(75,192,192,0.6)','rgba(255,159,100,0.6)','rgba(97,25,8,0.6)']}]}});_this2.setState({salesperdish:sales});console.log(_this2.state.chartData1.datasets.data);}).catch(function(err){toast(err,{position:toast.POSITION.TOP_CENTER,autoClose:1000});});}else if(res.data.status==false){// alert(res.data.error)\ntoast(res.data.error,{position:toast.POSITION.TOP_CENTER,autoClose:1000});}}).catch(function(error){// alert(\"login first\");\ntoast(\"Login First!!\",{position:toast.POSITION.TOP_CENTER,autoClose:1000});});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Bar,{data:this.state.chartData,options:{responsive:true,title:{display:this.props.displayTitle,text:'Sales per Dish',fontSize:20},legend:{display:true,position:'right',labels:{fontColor:'#000'}},layout:{padding:{left:50,right:0,bottom:0,top:0}},scales:{yAxes:[{ticks:{beginAtZero:true}}]},tooltips:{enabled:true}}}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CSVLink,{data:this.state.salesperdish,filename:\"SalesPerDish.csv\",className:\"btn btn-primary\",style:{background:'#779A25',borderColor:'#779A25'}},\"Sales Per Dish\")));}}]);return AnalyticsCharts;}(Component);AnalyticsCharts.defaultProps={displayTitle:true,displayLegend:true,legendPosition:'right'};export{AnalyticsCharts as default};","map":{"version":3,"sources":["C:/Users/chaur/Desktop/homechef-mern-new/homechef/front-end/src/AnalyticsCharts.js"],"names":["React","Component","Bar","CSVLink","axios","ToastContainer","toast","AnalyticsCharts","props","state","salesperdish","dish","amount","chartData","labels","datasets","label","data","backgroundColor","get","headers","localStorage","usertoken","then","res","console","log","status","array","sales","amounts","index","length","push","setState","chartData1","catch","err","position","POSITION","TOP_CENTER","autoClose","error","responsive","title","display","displayTitle","text","fontSize","legend","fontColor","layout","padding","left","right","bottom","top","scales","yAxes","ticks","beginAtZero","tooltips","enabled","background","borderColor","defaultProps","displayLegend","legendPosition"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {Bar} from 'react-chartjs-2';\r\nimport { CSVLink } from \"react-csv\";\r\nimport axios from 'axios'\r\nimport { ToastContainer, toast } from 'react-toastify';\r\n\r\n\r\nexport default class AnalyticsCharts extends Component {\r\n\r\nconstructor(props){\r\n    super(props);\r\n    this.state={\r\n        salesperdish : [\r\n            {\r\n                dish:'Pavbhaji',\r\n                amount:20\r\n            }\r\n        ],\r\n        chartData:{\r\n            labels:[],\r\n            datasets:[{\r\n                label:'sales',\r\n                data:[],\r\n                backgroundColor: [\r\n                    'rgba(255,99,132,0.6)',\r\n                    'rgba(54,152,235,0.6)',\r\n                    'rgba(75,192,192,0.6)',\r\n                    'rgba(255,159,100,0.6)',\r\n                    'rgba(97,25,8,0.6)'\r\n                ]\r\n            }]\r\n        }\r\n    }\r\n\r\n}\r\ncomponentDidMount() {\r\n    \r\n    axios.get('http://165.22.208.232:5000/homechef/profile', {\r\n    // axios.get('homechef/profile', {\r\n      headers: {\r\n        'auth-token': localStorage.usertoken\r\n      }})\r\n   .then(res => {\r\n       console.log(res)\r\n       if(res.data.status==true){\r\n        axios.get('http://165.22.208.232:5000/homechef/analysis', {\r\n        // axios.get('homechef/analysis', {\r\n            headers: {\r\n                'auth-token': localStorage.usertoken\r\n            }}).then(res=>{\r\n                let array=res.data.data.sales;\r\n                let data;\r\n                let sales=[],dish=[],amounts=[];\r\n                for (let index = 0; index < array.length; index++) {\r\n                   console.log(array[index][0].dish);\r\n                   console.log(array[index][0].dish);\r\n                    data ={\r\n                            dish:array[index][0].dish,\r\n                            amount:array[index][0].amount\r\n                    }\r\n                    dish.push(array[index][0].dish)\r\n                    amounts.push(array[index][0].amount)\r\n                    sales.push(data);\r\n                }\r\n                console.log(dish);\r\n                console.log(amounts);\r\n\r\n                this.setState( {\r\n                    chartData:{\r\n                        labels:dish,\r\n                        datasets:[{\r\n                            label:'sales',\r\n                            data:amounts,\r\n                            backgroundColor: [\r\n                                'rgba(255,99,132,0.6)',\r\n                                'rgba(54,152,235,0.6)',\r\n                                'rgba(75,192,192,0.6)',\r\n                                'rgba(255,159,100,0.6)',\r\n                                'rgba(97,25,8,0.6)'\r\n                            ]\r\n                        }]\r\n                    }\r\n            });\r\n\r\n                this.setState({salesperdish:sales});\r\n                console.log(this.state.chartData1.datasets.data);\r\n            }).catch((err)=>{\r\n                toast(err, {position: toast.POSITION.TOP_CENTER, autoClose: 1000});\r\n            })\r\n      }\r\n      else if(res.data.status==false){\r\n          // alert(res.data.error)\r\n          toast(res.data.error, {position: toast.POSITION.TOP_CENTER, autoClose: 1000});\r\n      } \r\n   }\r\n   )\r\n   .catch(error => {\r\n      // alert(\"login first\");\r\n     toast(\"Login First!!\", {position: toast.POSITION.TOP_CENTER, autoClose: 1000});\r\n    })\r\n  }\r\n\r\nstatic defaultProps={\r\n    displayTitle:true,\r\n    displayLegend: true,\r\n    legendPosition: 'right'\r\n}\r\n\r\n  render() {\r\n    return ( \r\n      <div>\r\n        <Bar\r\n          data={this.state.chartData}\r\n          options={{\r\n              responsive:true,\r\n            title:{\r\n                display:this.props.displayTitle,\r\n                text:'Sales per Dish',\r\n                fontSize:20\r\n          },\r\n        legend:{\r\n            display:true,\r\n            position: 'right',\r\n            labels:{\r\n                fontColor:'#000'\r\n            }\r\n        },\r\n        layout:{\r\n            padding:{\r\n                left:50,\r\n                right:0,\r\n                bottom:0,\r\n                top:0\r\n            }\r\n        },        \r\n        scales: {\r\n            yAxes: [{\r\n                ticks: {\r\n                    beginAtZero: true\r\n                }\r\n            }]\r\n        },    \r\n    tooltips:{\r\n        enabled: true\r\n    }}}\r\n        />\r\n        <div>           \r\n        <CSVLink data={this.state.salesperdish}\r\n        filename={\"SalesPerDish.csv\"}\r\n        className=\"btn btn-primary\"\r\n        style={{ background:'#779A25', borderColor:'#779A25'}}\r\n        >\r\n       Sales Per Dish\r\n        </CSVLink>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}